# ============================================================================
# Accordant (XMarkDigest) Application Configuration
# ============================================================================
# Copy this file to .env and update with actual values
# Set permissions: chmod 600 .env

# ============================================================================
# Database Configuration (App-Specific User)
# ============================================================================
# See ADR-0014 for database strategy: each app gets its own database user
# Setup commands:
#   CREATE USER accordant WITH PASSWORD 'secure-password';
#   CREATE DATABASE accordant;
#   GRANT ALL PRIVILEGES ON DATABASE accordant TO accordant;

# Database Password (generate secure password)
# IMPORTANT: Must be defined BEFORE DATABASE_URL (which uses this variable)
ACCORDANT_DB_PASSWORD=<generate-secure-password>

# Database Connection URL (uses ACCORDANT_DB_PASSWORD variable above)
DATABASE_URL=postgresql://accordant:${ACCORDANT_DB_PASSWORD}@ai-stack_db:5432/accordant?sslmode=require

# ============================================================================
# Redis Configuration
# ============================================================================
# Redis is provided by infrastructure layer
# Connection via internal Docker network
REDIS_HOST=ai-stack_redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://ai-stack_redis:6379

# ============================================================================
# Authentication & Security
# ============================================================================

# NextAuth Configuration
NEXTAUTH_SECRET=<generate-with-openssl-rand-base64-32>
NEXTAUTH_URL=https://accordant.eu

# Encryption Key (64-character hex string for encrypting tokens)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=<generate-64-char-hex-string>

# ============================================================================
# X (Twitter) OAuth 2.0 Configuration
# ============================================================================
# Get credentials from: https://developer.x.com/en/portal/dashboard
X_CLIENT_ID=<your-x-client-id>
X_CLIENT_SECRET=<your-x-client-secret>
X_CALLBACK_URL=https://accordant.eu/api/auth/callback/twitter

# ============================================================================
# Google Drive OAuth (Optional)
# ============================================================================
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://accordant.eu/api/auth/callback/google

# ============================================================================
# LLM API Configuration
# ============================================================================
# Get API key from: https://openrouter.ai/keys
LLM_API_KEY=sk-or-v1-...
LLM_BASE_URL=https://openrouter.ai/api/v1
LLM_DEFAULT_MODEL=anthropic/claude-sonnet-4-20250514
LLM_MAX_COST_PER_USER_MONTH=5.00

# ============================================================================
# Email Configuration (Resend)
# ============================================================================
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY=re_...
EMAIL_FROM=onboarding@resend.dev

# ============================================================================
# Vector Database (Qdrant) - Optional (Phase 6)
# ============================================================================
# Only needed if vector features are enabled
# QDRANT_URL=http://ai-stack_qdrant:6333
# QDRANT_API_KEY=${QDRANT_API_KEY}
# ENABLE_VECTOR_SYNC=false

# ============================================================================
# Ingestion Service (Unstructured) - Optional (Phase 6)
# ============================================================================
# Only needed if ingestion features are enabled
# UNSTRUCTURED_API_URL=http://localhost:8000
# UNSTRUCTURED_API_KEY=

# ============================================================================
# Application Configuration
# ============================================================================

# Node Environment
NODE_ENV=production

# Logging Level (debug, info, warn, error)
LOG_LEVEL=info

# ============================================================================
# Domain Configuration
# ============================================================================

DOMAIN_NAME=accordant.eu

# ============================================================================
# Security Metadata (Required for workspace compliance)
# ============================================================================

SECURITY_OWNER=<your-name>
SECURITY_CONTACT=<your-email>

# ============================================================================
# Infrastructure Service URLs (Optional - if needed)
# ============================================================================

# LiteLLM (only if app needs LLM services via LiteLLM instead of direct OpenRouter)
# LITELLM_URL=http://ai-stack_litellm:4000
# LITELLM_MASTER_KEY=${LITELLM_MASTER_KEY}
