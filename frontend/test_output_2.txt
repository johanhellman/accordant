
> accordant-frontend@0.3.0 test
> vitest src/api.test.js --run


[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/Users/johanhellman/Projects/LLM Experiments/accordant/frontend[39m

 [31mâ¯[39m src/api.test.js [2m([22m[2m12 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 8[2mms[22m[39m
       [32mâœ“[39m should fetch current user details[32m 1[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 4[2mms[22m[39m
       [32mâœ“[39m should fetch and return conversations list[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should create a new conversation[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should fetch a specific conversation[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should send a message and return response[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m should stream messages and call onEvent for each event[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m should throw error on failed request[39m[32m 0[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 6 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22mgetCurrentUser[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to get current user' but got '401 undefined'[39m

Expected: [32m"Failed to get current user"[39m
Received: [31m"401 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m48:7[22m[39m
    [90m 46| [39m      })[33m;[39m
    [90m 47| [39m
    [90m 48| [39m      await expect(api.getCurrentUser()).rejects.toThrow("Failed to geâ€¦
    [90m   | [39m      [31m^[39m
    [90m 49| [39m    })[33m;[39m
    [90m 50| [39m  })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/6]â¯[22m[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22mlistConversations[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to list conversations' but got '500 undefined'[39m

Expected: [32m"Failed to list conversations"[39m
Received: [31m"500 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m80:7[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      await expect(api.listConversations()).rejects.toThrow("Failed toâ€¦
    [90m   | [39m      [31m^[39m
    [90m 81| [39m    })[33m;[39m
    [90m 82| [39m  })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/6]â¯[22m[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22mcreateConversation[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to create conversation' but got '500 undefined'[39m

Expected: [32m"Failed to create conversation"[39m
Received: [31m"500 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m115:7[22m[39m
    [90m113| [39m      })[33m;[39m
    [90m114| [39m
    [90m115| [39m      await expect(api.createConversation()).rejects.toThrow("Failed tâ€¦
    [90m   | [39m      [31m^[39m
    [90m116| [39m    })[33m;[39m
    [90m117| [39m  })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/6]â¯[22m[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22mgetConversation[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to get conversation' but got '404 undefined'[39m

Expected: [32m"Failed to get conversation"[39m
Received: [31m"404 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m149:7[22m[39m
    [90m147| [39m      })[33m;[39m
    [90m148| [39m
    [90m149| [39m      await expect(api.getConversation("non-existent")).rejects.toThroâ€¦
    [90m   | [39m      [31m^[39m
    [90m150| [39m        [32m"Failed to get conversation"[39m
    [90m151| [39m      )[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/6]â¯[22m[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22msendMessage[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to send message' but got '404 undefined'[39m

Expected: [32m"Failed to send message"[39m
Received: [31m"404 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m189:7[22m[39m
    [90m187| [39m      })[33m;[39m
    [90m188| [39m
    [90m189| [39m      await expect(api.sendMessage("test-id", "Hello")).rejects.toThroâ€¦
    [90m   | [39m      [31m^[39m
    [90m190| [39m    })[33m;[39m
    [90m191| [39m  })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/6]â¯[22m[39m

[41m[1m FAIL [22m[49m src/api.test.js[2m > [22mAPI Client[2m > [22msendMessageStream[2m > [22mshould throw error on failed request
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to send message' but got '404 undefined'[39m

Expected: [32m"Failed to send message"[39m
Received: [31m"404 undefined"[39m

[36m [2mâ¯[22m src/api.test.js:[2m257:7[22m[39m
    [90m255| [39m      })[33m;[39m
    [90m256| [39m
    [90m257| [39m      await expect(api.sendMessageStream("test-id", "Hello", vi.fn()))â€¦
    [90m   | [39m      [31m^[39m
    [90m258| [39m        [32m"Failed to send message"[39m
    [90m259| [39m      )[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/6]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 21:10:57
[2m   Duration [22m 379ms[2m (transform 26ms, setup 52ms, import 20ms, tests 8ms, environment 210ms)[22m

